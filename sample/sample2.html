<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Upload Image Ajax</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<style media="screen">
.preview{
  display: block;
  width: 350px;
  height: 150px;
  border: 1px solid black;
  margin-top: 10px;
  text-align: center; /* Added to center the text */
  line-height: 150px; /* Added to vertically center the text */
}
</style>
<body>
  <form method="post" action="" enctype="multipart/form-data">
    <input type="file" name="fileImg" id="fileImg">
    <button type="button" onclick="submitData();">Submit</button>
    <button type="button" onclick="clearImage();">Clear Picture</button> <!-- Added clear button -->
    <div class="preview" id="previewDiv">
      350 x 150 pixels <!-- Initial dimensions text -->
    </div>
  </form>

  <script type="text/javascript">
    // Preview
    fileImg.onchange = evt => {
      const [file] = fileImg.files;
      if (file) {
        $('#previewDiv').text(''); // Clear the dimensions text
        var reader = new FileReader();
        reader.onload = function(e) {
          $('#previewDiv').html('<img src="' + e.target.result + '" style="width: 100%; height: 100%;" />');
        }
        reader.readAsDataURL(file);
      } else {
        $('#previewDiv').html('350 x 150 pixels'); // Display dimensions text
      }
    }

    // Submit
    function submitData() {
      $(document).ready(function(){
        var formData = new FormData();
        var files = $('#fileImg')[0].files;
        formData.append('fileImg', files[0]);

        $.ajax({
          url: 'function.php',
          type: 'post',
          data: formData,
          contentType: false,
          processData: false,
          success: function(response) {
            if(response == "Success") {
              alert("Successfully Added");
            }
            else if(response == "Invalid Extension") {
              alert("Invalid Extension");
            }
            else {
              alert("Please Fill Out The Form");
            }
          }
        });
      });
    }

    // Clear image
    function clearImage() {
      $('#img').attr('src', ''); // Clears the source of the image
      $('#fileImg').val(''); // Clears the file input value
      $('#previewDiv').html('350 x 150 pixels'); // Display dimensions text
    }
  </script>
</body>
</html>
